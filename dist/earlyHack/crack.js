/** @param {import("../..").NS} ns */
export async function main(ns) {
    var target = ns.args[0];
    await ns.scp("infil.js", "home", target);
    var ports = 0;
    if (ns.fileExists("BruteSSH.exe", "home")) {
        await ns.brutessh(target);
        ports++;
    }
    if (ns.fileExists("FTPCrack.exe", "home")) {
        await ns.ftpcrack(target);
        ports++;
    }
    if (ns.fileExists("relaySMTP.exe", "home")) {
        await ns.relaysmtp(target);
        ports++;
    }
    if (ns.fileExists("HTTPWorm.exe", "home")) {
        await ns.httpworm(target);
        ports++;
    }
    if (ns.fileExists("SQLInject.exe", "home")) {
        await ns.sqlinject(target);
        ports++;
    }
    if (ns.getServerNumPortsRequired(target) <= ports) {
        await ns.nuke(target);
    }
    if (ns.hasRootAccess(target)) {
        var threads = Math.floor(ns.getServerMaxRam(target) / 2.4);
        if (target == "home") {
            threads -= 14.2;
        }
        if (threads > 0) {
            await ns.exec("infil.js", target, threads);
        }
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3JhY2suanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvZWFybHlIYWNrL2NyYWNrLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLHFDQUFxQztBQUVyQyxNQUFNLENBQUMsS0FBSyxVQUFVLElBQUksQ0FBQyxFQUFFO0lBQzVCLElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFFeEIsTUFBTSxFQUFFLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBRSxNQUFNLEVBQUMsTUFBTSxDQUFDLENBQUM7SUFDeEMsSUFBSSxLQUFLLEdBQUcsQ0FBQyxDQUFDO0lBQ2QsSUFBRyxFQUFFLENBQUMsVUFBVSxDQUFDLGNBQWMsRUFBRSxNQUFNLENBQUMsRUFBQztRQUN4QyxNQUFNLEVBQUUsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDMUIsS0FBSyxFQUFFLENBQUM7S0FDUjtJQUNELElBQUcsRUFBRSxDQUFDLFVBQVUsQ0FBQyxjQUFjLEVBQUUsTUFBTSxDQUFDLEVBQUM7UUFDeEMsTUFBTSxFQUFFLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzFCLEtBQUssRUFBRSxDQUFDO0tBQ1I7SUFDRCxJQUFHLEVBQUUsQ0FBQyxVQUFVLENBQUMsZUFBZSxFQUFFLE1BQU0sQ0FBQyxFQUFDO1FBQ3pDLE1BQU0sRUFBRSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUMzQixLQUFLLEVBQUUsQ0FBQztLQUNSO0lBQ0QsSUFBRyxFQUFFLENBQUMsVUFBVSxDQUFDLGNBQWMsRUFBRSxNQUFNLENBQUMsRUFBQztRQUN4QyxNQUFNLEVBQUUsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDMUIsS0FBSyxFQUFFLENBQUM7S0FDUjtJQUNELElBQUcsRUFBRSxDQUFDLFVBQVUsQ0FBQyxlQUFlLEVBQUUsTUFBTSxDQUFDLEVBQUM7UUFDekMsTUFBTSxFQUFFLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzNCLEtBQUssRUFBRSxDQUFDO0tBQ1I7SUFHRCxJQUFHLEVBQUUsQ0FBQyx5QkFBeUIsQ0FBQyxNQUFNLENBQUMsSUFBRyxLQUFLLEVBQUM7UUFDL0MsTUFBTSxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0tBQ3RCO0lBRUQsSUFBRyxFQUFFLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxFQUFDO1FBQzNCLElBQUksT0FBTyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsR0FBQyxHQUFHLENBQUMsQ0FBQztRQUN6RCxJQUFHLE1BQU0sSUFBSSxNQUFNLEVBQUM7WUFDbkIsT0FBTyxJQUFFLElBQUksQ0FBQztTQUNkO1FBQ0EsSUFBRyxPQUFPLEdBQUcsQ0FBQyxFQUFDO1lBQ2QsTUFBTSxFQUFFLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7U0FDM0M7S0FDRjtBQUdGLENBQUMifQ==