/* eslint-disable no-constant-condition */
/** @param {import("../..").NS} ns */
export async function main(ns) {
    var curentRam = 2;
    var percent = 0.85;
    if (ns.args.length != 0) {
        percent = ns.args[0];
    }
    var pServers = ns.getPurchasedServers();
    if (pServers.length > 0) {
        curentRam = ns.getServerMaxRam(pServers[0]);
    }
    var x = ns.getServerMoneyAvailable("home") * percent / ns.getPurchasedServerCost(1) / 25;
    var y = Math.floor(Math.log(x) / Math.log(2));
    var ram = Math.pow(2, y);
    if (curentRam < ram) {
        await ns.exec("/buyServ/delServ.js", "home");
        while (true) {
            await ns.sleep(1000);
            if (!ns.scriptRunning("/buyServ/delServ.js", "home")) {
                await ns.exec("/buyServ/getServ.js", "home", 1, percent);
                break;
            }
        }
    }
    else {
        ns.tprint("Insufficient Funds for new Servers!");
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGVyU2Vydi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9idXlTZXJ2L3BlclNlcnYuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsMENBQTBDO0FBQzFDLHFDQUFxQztBQUVyQyxNQUFNLENBQUMsS0FBSyxVQUFVLElBQUksQ0FBQyxFQUFFO0lBQzVCLElBQUksU0FBUyxHQUFHLENBQUMsQ0FBQztJQUNsQixJQUFJLE9BQU8sR0FBRyxJQUFJLENBQUM7SUFDbkIsSUFBRyxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDLEVBQUM7UUFDdEIsT0FBTyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7S0FDckI7SUFDRCxJQUFJLFFBQVEsR0FBQyxFQUFFLENBQUMsbUJBQW1CLEVBQUUsQ0FBQTtJQUNyQyxJQUFHLFFBQVEsQ0FBQyxNQUFNLEdBQUMsQ0FBQyxFQUFDO1FBQ3BCLFNBQVMsR0FBRyxFQUFFLENBQUMsZUFBZSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0tBQzVDO0lBRUQsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDLHVCQUF1QixDQUFDLE1BQU0sQ0FBQyxHQUFDLE9BQU8sR0FBQyxFQUFFLENBQUMsc0JBQXNCLENBQUMsQ0FBQyxDQUFDLEdBQUMsRUFBRSxDQUFDO0lBQ2hGLElBQUksQ0FBQyxHQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDM0MsSUFBSSxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLENBQUM7SUFDM0IsSUFBRyxTQUFTLEdBQUcsR0FBRyxFQUFDO1FBQ2xCLE1BQU0sRUFBRSxDQUFDLElBQUksQ0FBQyxxQkFBcUIsRUFBRSxNQUFNLENBQUMsQ0FBQztRQUM3QyxPQUFNLElBQUksRUFBQztZQUNWLE1BQU0sRUFBRSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNyQixJQUFHLENBQUMsRUFBRSxDQUFDLGFBQWEsQ0FBQyxxQkFBcUIsRUFBRSxNQUFNLENBQUMsRUFBQztnQkFDbkQsTUFBTSxFQUFFLENBQUMsSUFBSSxDQUFDLHFCQUFxQixFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7Z0JBQ3pELE1BQU07YUFDTjtTQUNEO0tBQ0Q7U0FDRztRQUNILEVBQUUsQ0FBQyxNQUFNLENBQUMscUNBQXFDLENBQUMsQ0FBQztLQUNqRDtBQUVGLENBQUMifQ==